<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<title>ã‚¦ã‚¯ãƒ¬ãƒ¬ã§ã‚ãã¼ã†</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Mochiy+Pop+One&family=Zen+Maru+Gothic:wght@700;900&display=swap" rel="stylesheet">

<style>
  :root { --vh: 1vh; }
  
  html, body {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    overflow: hidden;
    position: fixed;
    font-family: "Mochiy Pop One", "Zen Maru Gothic", sans-serif;
    /* æ˜ã‚‹ã„ç©ºã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
    background: linear-gradient(180deg, #87CEEB 0%, #E0F7FA 60%, #FFF8E1 100%);
    user-select: none;
  }

  /* é›²ã®èƒŒæ™¯ï¼ˆã‚†ã£ãã‚Šå‹•ãï¼‰ */
  body::before {
    content: ""; position: absolute; inset: 0;
    background-image: 
      radial-gradient(circle at 15% 15%, rgba(255,255,255,0.6) 0, transparent 120px),
      radial-gradient(circle at 85% 30%, rgba(255,255,255,0.5) 0, transparent 180px);
    animation: cloudMove 30s linear infinite alternate;
    pointer-events: none;
  }
  @keyframes cloudMove { from{background-position: 0 0;} to{background-position: 50px 0;} }

  /* === ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ === */
  .app-container {
    position: absolute; inset: 0;
    display: flex; flex-direction: column;
    align-items: center; justify-content: space-between;
    padding: env(safe-area-inset-top) 20px 20px 20px;
    z-index: 10;
  }

  /* 1. ã‚¿ã‚¤ãƒˆãƒ«ã‚¨ãƒªã‚¢ */
  .title-area {
    margin-top: 1vh;
    text-align: center;
    position: relative;
    z-index: 20;
    filter: drop-shadow(0 4px 0 rgba(0,0,0,0.1));
  }
  .game-title {
    font-size: clamp(36px, 8vw, 70px);
    margin: 0;
    color: #FF8C00; 
    -webkit-text-stroke: 6px #ffffff;
    paint-order: stroke fill;
    text-shadow: 4px 4px 0 rgba(0,0,0,0.1);
    transform: rotate(-2deg);
    animation: titleFloat 3s ease-in-out infinite;
  }
  .sub-title {
    font-size: clamp(14px, 2.2vw, 20px);
    color: #009688;
    background: rgba(255,255,255,0.95);
    padding: 5px 20px;
    border-radius: 99px;
    display: inline-block;
    font-weight: 900;
    margin-top: -5px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }
  @keyframes titleFloat {
    0%, 100% { transform: rotate(-2deg) translateY(0); }
    50% { transform: rotate(2deg) translateY(-6px); }
  }


  /* 2. èƒŒæ™¯ã‚¤ãƒ©ã‚¹ãƒˆï¼ˆã‚¦ã‚¯ãƒ¬ãƒ¬ã¨å³¶ï¼‰ */
  .center-illustration {
    position: absolute;
    top: 55%; left: 50%; /* ç”»é¢ä¸­å¤®ã‚ˆã‚Šå°‘ã—ä¸‹ */
    transform: translate(-50%, -50%);
    width: min(800px, 90vw);
    height: min(600px, 65vh);
    z-index: -1;
    pointer-events: none;
    opacity: 0.9;
  }
  .center-illustration svg {
    width: 100%; height: 100%;
    /* ã‚†ã£ãŸã‚Šæºã‚Œã‚‹ */
    animation: illustrationSway 8s ease-in-out infinite;
    transform-origin: center bottom;
  }
  @keyframes illustrationSway {
    0%,100%{ transform: rotate(-1deg) scale(1); }
    50%{ transform: rotate(1deg) scale(1.02); }
  }


  /* 3. ğŸ°ã›ã‚“ã›ã„ã‚¬ã‚¤ãƒ‰ï¼ˆä¸­å¤®ã«é…ç½®ï¼‰ */
  .guide-container {
    /* çµ¶å¯¾é…ç½®ã‚’ã‚„ã‚ã€Flexã‚¢ã‚¤ãƒ†ãƒ ã¨ã—ã¦é…ç½®ï¼ˆé‡ãªã‚Šé˜²æ­¢ï¼‰ */
    margin-top: auto; 
    margin-bottom: auto;
    position: relative;
    z-index: 30;
    display: flex;
    flex-direction: column;
    align-items: center;
    /* ãµã‚ãµã‚æµ®éŠ */
    animation: guideFloat 4s ease-in-out infinite;
  }

  .teacher-bunny {
    font-size: clamp(60px, 12vh, 90px); /* ğŸ°ã‚’å¤§ããï¼ */
    line-height: 1;
    filter: drop-shadow(0 5px 10px rgba(0,0,0,0.2));
    /* ã·ã‚‹ã‚“ã¨ã—ãŸå‹•ã */
    animation: bunnyBounce 3s infinite;
    transform-origin: bottom center;
    cursor: default;
  }
  
  .speech-bubble {
    background: #fff;
    color: #444;
    padding: 12px 24px;
    border-radius: 30px;
    font-size: clamp(16px, 3vw, 22px);
    font-weight: 900;
    position: relative;
    margin-bottom: 10px; /* ã†ã•ãã®ä¸Šã«é…ç½® */
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    border: 3px solid #444;
  }
  /* å¹ãå‡ºã—ã®ã—ã£ã½ï¼ˆä¸‹å‘ãï¼‰ */
  .speech-bubble::after {
    content: ""; position: absolute;
    bottom: -12px; left: 50%; transform: translateX(-50%);
    border-width: 12px 12px 0; border-style: solid;
    border-color: #444 transparent transparent transparent;
  }
  /* å¹ãå‡ºã—ã®ä¸­èº«ã®ç™½ï¼ˆæ ç·šå¯¾ç­–ï¼‰ */
  .speech-bubble::before {
    content: ""; position: absolute;
    bottom: -6px; left: 50%; transform: translateX(-50%);
    border-width: 9px 9px 0; border-style: solid;
    border-color: #fff transparent transparent transparent;
    z-index: 1;
  }

  @keyframes guideFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  @keyframes bunnyBounce {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1, 0.95); } /* ã‚€ã«ã‚…ã£ã¨æ½°ã‚Œã‚‹ */
    70% { transform: scale(0.95, 1.05); } /* ä¼¸ã³ã‚‹ */
  }


  /* 4. ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ */
  .menu-row {
    display: flex;
    gap: clamp(100px, 20vw, 300px); /* ã‚¦ã‚¯ãƒ¬ãƒ¬ã‚’é¿ã‘ã¦é…ç½® */
    align-items: center;
    justify-content: center;
    width: 100%;
    margin-bottom: 4vh;
    position: relative;
    z-index: 40;
  }
  
  /* ã‚¹ãƒãƒ›ç¸¦ãªã©ç‹­ã„ç”»é¢å¯¾ç­– */
  @media (max-width: 600px) {
    .menu-row { gap: 20px; }
    .center-illustration { opacity: 0.4; } /* ã‚¤ãƒ©ã‚¹ãƒˆã‚’è–„ãã—ã¦ãƒœã‚¿ãƒ³ã‚’è¦‹ã‚„ã™ã */
    .teacher-bunny { font-size: 60px; }
  }

  .play-btn {
    width: min(240px, 35vw);
    padding: 15px 10px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 24px;
    border: 4px solid #fff;
    box-shadow: 0 10px 0 rgba(0,0,0,0.15), 0 15px 25px rgba(0,0,0,0.1);
    text-align: center;
    cursor: pointer;
    transition: transform 0.1s;
    text-decoration: none;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .play-btn:active {
    transform: translateY(6px);
    box-shadow: 0 4px 0 rgba(0,0,0,0.15);
  }

  .btn-tap { background: linear-gradient(135deg, #FF9A9E 0%, #FECFEF 100%); }
  .btn-uke { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
  
  .btn-icon { font-size: 36px; display: block; filter: drop-shadow(0 2px 0 rgba(0,0,0,0.2)); margin-bottom: 5px; }
  .btn-title { font-size: clamp(16px, 3vw, 24px); color: #fff; text-shadow: 1px 1px 0 rgba(0,0,0,0.2); margin: 0; line-height: 1.2; }
  .btn-desc { font-size: 12px; color: rgba(255,255,255,0.9); font-weight: 900; margin-top: 4px; }


  /* ãƒšãƒ¼ã‚¸é·ç§» & æ¨ªç”»é¢ãƒ­ãƒƒã‚¯ */
  #pageFlip { position: fixed; inset: 0; z-index: 9999; display: none; background: #fff; }
  #pageFlip.run { display: block; animation: fadeOut 0.3s forwards; }
  @keyframes fadeOut { from{opacity:0;} to{opacity:1;} }

  #landscapeLock {
    position: fixed; inset: 0; display: none; z-index: 99999;
    background: rgba(40,40,40,0.95); color: #fff;
    align-items: center; justify-content: center; flex-direction: column;
  }
  body.needLandscape #landscapeLock { display: flex; }

</style>
</head>

<body>

<div class="app-container">
  
  <header class="title-area">
    <h1 class="game-title">ã‚¦ã‚¯ãƒ¬ãƒ¬ã§ã‚ãã¼ã†</h1>
    <span class="sub-title">ãƒªã‚ºãƒ ã«ã‚ã‚ã›ã¦ ã‚¨ãƒ³ã‚¸ãƒ§ã‚¤ï¼</span>
  </header>

  <div class="center-illustration">
    <svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 800 600">
      <g transform="translate(0, 40)">
        <ellipse cx="400" cy="500" fill="#cfeeb0" rx="260" ry="60"></ellipse>
        <path d="M360 480 C300 360, 340 260, 330 160 C320 80, 300 40, 280 20 L320 20 C360 60, 380 120, 390 200 C400 300, 380 380, 420 480 Z" fill="#7a4a21"></path>
        <path d="M310 350 Q350 340 380 330" fill="none" stroke="#d8b04c" stroke-width="8"></path>
        <path d="M300 300 Q340 290 370 280" fill="none" stroke="#d8b04c" stroke-width="8"></path>
        <path d="M295 250 Q330 240 360 230" fill="none" stroke="#d8b04c" stroke-width="8"></path>
        <g fill="#6aaa1f">
          <path d="M330 40 C180 20, 60 120, 40 200"></path>
          <path d="M330 40 C200 0, 120 40, 90 100"></path>
          <path d="M330 40 C460 20, 580 120, 620 220"></path>
          <path d="M330 40 C480 0, 620 40, 660 120"></path>
          <path d="M330 50 C310 10, 330 0, 350 -20"></path>
        </g>
        <circle cx="340" cy="60" fill="#c8b04a" r="18"></circle>
        <circle cx="365" cy="65" fill="#c8b04a" r="18"></circle>

        <g transform="translate(440 420) rotate(-15)">
          <ellipse cx="50" cy="80" fill="#c68642" rx="45" ry="60"></ellipse>
          <ellipse cx="50" cy="80" fill="#5a3a1a" rx="12" ry="16"></ellipse>
          <rect fill="#b5651d" height="70" width="12" x="44" y="10"></rect>
          <rect fill="#d79a3a" height="20" rx="5" width="40" x="30" y="-20"></rect>
          <line stroke="#ffffff" stroke-width="2" x1="48" x2="48" y1="10" y2="150"></line>
          <line stroke="#ffffff" stroke-width="2" x1="52" x2="52" y1="10" y2="150"></line>
        </g>
        <g class="notes-burst" transform="translate(480 400)">
           <text x="0" y="0" font-size="40" fill="#333" style="animation: flyNote 2s infinite">â™ª</text>
           <text x="25" y="-25" font-size="30" fill="#333" style="animation: flyNote 2.4s infinite 0.6s">â™«</text>
           <text x="-20" y="-15" font-size="35" fill="#333" style="animation: flyNote 2.2s infinite 1.2s">âœ¨</text>
        </g>
      </g>
      <style>
        @keyframes flyNote {
          0%{ opacity:0; transform: translate(0,0) rotate(0deg); }
          50%{ opacity:1; }
          100%{ opacity:0; transform: translate(30px, -80px) rotate(20deg); }
        }
      </style>
    </svg>
  </div>

  <div class="guide-container">
    <div class="speech-bubble">ã©ã£ã¡ã§ ã‚ãã¶ï¼Ÿ</div>
    <div class="teacher-bunny">ğŸ°</div>
  </div>

  <div class="menu-row">
    <div class="play-btn btn-tap" onclick="goFlip('game.html?mode=TAP')">
      <span class="btn-icon">ğŸ‘†</span>
      <h2 class="btn-title">ã‚¿ãƒƒãƒ—ã§<br>ã‚ãã¶</h2>
      <span class="btn-desc">ã™ãã«ã‚ãã¹ã‚‹ï¼</span>
    </div>

    <div class="play-btn btn-uke" onclick="goFlip('ukulele.html')">
      <span class="btn-icon">ğŸ¸</span>
      <h2 class="btn-title">ã‚¦ã‚¯ãƒ¬ãƒ¬ã§<br>ã‚ãã¶</h2>
      <span class="btn-desc">æ¥½å™¨ã‚’ã¤ã‹ã†ã‚ˆ</span>
    </div>
  </div>

</div>

<div id="pageFlip"></div>

<div id="landscapeLock">
  <div style="font-size:40px;">ğŸ“±â†”ï¸</div>
  <p style="font-weight:bold;">æ¨ªç”»é¢ã«ã—ã¦ã­</p>
</div>

<script>
// === ã‚¹ã‚¯ãƒªãƒ—ãƒˆ ===
function setVh(){
  const h = (window.visualViewport ? window.visualViewport.height : window.innerHeight);
  document.documentElement.style.setProperty('--vh', (h*0.01)+'px');
}
window.addEventListener('resize', setVh);
window.addEventListener('orientationchange', ()=>setTimeout(setVh, 250));
setVh();

let __navLock = false;
function goFlip(url){
  if(__navLock) return;
  __navLock = true;
  document.getElementById('pageFlip').classList.add('run');
  setTimeout(()=>{ location.href = url; }, 300);
}
window.addEventListener('pageshow', ()=>{
  __navLock = false;
  document.getElementById('pageFlip').classList.remove('run');
});

(function(){
  function apply(){
    var portrait = window.innerHeight > window.innerWidth;
    document.body.classList.toggle('needLandscape', portrait);
  }
  window.addEventListener('resize', apply);
  window.addEventListener('orientationchange', apply);
  apply();
})();
</script>

</body>
</html>