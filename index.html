<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#FFEB3B">
<title>ã‚¦ã‚¯ãƒ¬ãƒ¬ã§ã‚ãã¼ã†</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@800;900&family=Mochiy+Pop+One&display=swap" rel="stylesheet">

<style>
  :root {
    --vh: 1vh;
    --primary-color: #FF6B6B;
    --secondary-color: #4ECDC4;
    --accent-color: #FFE66D;
    --text-color: #2d3436;
    --card-bg: rgba(255, 255, 255, 0.65);
    --shadow-light: inset 5px 5px 10px rgba(255, 255, 255, 0.5), 5px 5px 15px rgba(0, 0, 0, 0.1);
    --shadow-deep: 0 15px 35px rgba(0,0,0,0.2), 0 5px 15px rgba(0,0,0,0.1);
  }

  * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

  body {
    margin: 0; padding: 0;
    width: 100%; height: 100dvh;
    height: calc(var(--vh) * 100);
    overflow: hidden;
    position: fixed;
    font-family: "Mochiy Pop One", "M PLUS Rounded 1c", sans-serif;
    /* ãƒˆãƒ­ãƒ”ã‚«ãƒ«ã§ãƒ¯ã‚¯ãƒ¯ã‚¯ã™ã‚‹ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ */
    background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
    user-select: none;
  }
  
  /* å‹•ãèƒŒæ™¯ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
  @keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* ãƒ‰ãƒƒãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼ˆãƒãƒƒãƒ—ãªè³ªæ„Ÿï¼‰ */
  body::after {
    content: ""; position: fixed; inset: 0;
    background-image: radial-gradient(#ffffff 20%, transparent 20%);
    background-size: 20px 20px;
    opacity: 0.15; pointer-events: none;
  }

  /* === ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ === */
  .app-container {
    position: absolute; inset: 0;
    display: grid;
    grid-template-rows: auto 1fr; /* ã‚¿ã‚¤ãƒˆãƒ«ã‚¨ãƒªã‚¢ + ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ */
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    z-index: 10;
  }

  /* ã‚¿ã‚¤ãƒˆãƒ«ã‚¨ãƒªã‚¢ */
  .header {
    display: flex;
    justify-content: center;
    align-items: center;
    padding-top: 2vh;
    position: relative;
    z-index: 20;
  }

  .game-title {
    font-size: clamp(32px, 6vw, 64px);
    color: #fff;
    text-align: center;
    text-shadow: 4px 4px 0px #FF9F43, 8px 8px 0px rgba(0,0,0,0.15);
    transform: rotate(-2deg);
    animation: titleBounce 3s ease-in-out infinite;
    white-space: nowrap;
  }
  .game-title span { display: inline-block; }
  
  @keyframes titleBounce {
    0%, 100% { transform: rotate(-2deg) translateY(0); }
    50% { transform: rotate(2deg) translateY(-10px); }
  }

  /* ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ï¼ˆå·¦å³åˆ†å‰²ï¼‰ */
  .menu-stage {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 4vw;
    padding: 20px;
    perspective: 1000px;
  }

  /* === ã‚¯ãƒ¬ã‚¤é¢¨ã‚«ãƒ¼ãƒ‰ï¼ˆãƒœã‚¿ãƒ³ï¼‰ === */
  .mode-card {
    position: relative;
    width: min(340px, 40vw);
    height: min(280px, 55vh);
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 35px;
    border: 4px solid #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    cursor: pointer;
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-shadow: 
      0 20px 40px rgba(0,0,0,0.1),
      inset 0 -8px 0 rgba(0,0,0,0.1);
    text-decoration: none;
    overflow: hidden;
  }

  /* æŠ¼ã—ãŸæ™‚ã®ã€Œã‚€ã«ã‚…ã£ã€ã¨ã—ãŸå‹•ã */
  .mode-card:active {
    transform: scale(0.92) translateY(5px);
    box-shadow: 0 5px 10px rgba(0,0,0,0.1), inset 0 4px 10px rgba(0,0,0,0.1);
  }

  /* ãƒ›ãƒãƒ¼ï¼ˆPCç”¨ï¼‰ */
  @media (hover: hover) {
    .mode-card:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 30px 60px rgba(0,0,0,0.2), inset 0 -8px 0 rgba(0,0,0,0.1);
    }
  }

  /* ã‚«ãƒ¼ãƒ‰ã”ã¨ã®ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ */
  .card-tap {
    background: linear-gradient(145deg, #FF9A9E 0%, #FECFEF 100%);
  }
  .card-uke {
    background: linear-gradient(145deg, #4facfe 0%, #00f2fe 100%);
  }

  .card-icon {
    font-size: clamp(40px, 8vw, 70px);
    margin-bottom: 10px;
    filter: drop-shadow(0 4px 0 rgba(0,0,0,0.2));
    transition: transform 0.4s ease;
  }
  /* ã‚«ãƒ¼ãƒ‰ãƒ›ãƒãƒ¼æ™‚ã«ã‚¢ã‚¤ã‚³ãƒ³ãŒè·³ã­ã‚‹ */
  .mode-card:hover .card-icon {
    transform: scale(1.2) rotate(10deg);
  }

  .card-title {
    font-size: clamp(20px, 3vw, 32px);
    color: #fff;
    text-shadow: 2px 2px 0 rgba(0,0,0,0.15);
    margin: 0;
    line-height: 1.2;
  }
  .card-sub {
    font-size: clamp(12px, 1.5vw, 16px);
    color: rgba(255,255,255,0.9);
    font-weight: 800;
    margin-top: 8px;
    display: block;
  }
  
  /* ã‚«ãƒ¼ãƒ‰ä¸Šã®é£¾ã‚Šï¼ˆå…‰æ²¢ï¼‰ */
  .mode-card::before {
    content: ""; position: absolute;
    top: 15px; left: 15px; right: 15px; height: 40%;
    background: linear-gradient(180deg, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0) 100%);
    border-radius: 20px;
    pointer-events: none;
  }

  /* === ã‚¦ã‚¯ãƒ¬ãƒ¬ãƒã‚¹ã‚³ãƒƒãƒˆï¼ˆä¸­å¤®é…ç½®ãƒ»è£…é£¾ï¼‰ === */
  .mascot-container {
    position: absolute;
    bottom: -5vh; left: 50%;
    transform: translateX(-50%);
    width: min(500px, 60vw);
    height: 60vh;
    z-index: -1; /* ã‚«ãƒ¼ãƒ‰ã®å¾Œã‚ */
    opacity: 0.9;
    pointer-events: none;
    filter: drop-shadow(0 10px 20px rgba(0,0,0,0.2));
    animation: ukeFloat 6s ease-in-out infinite;
  }
  @keyframes ukeFloat {
    0%, 100% { transform: translateX(-50%) rotate(-5deg); }
    50% { transform: translateX(-50%) rotate(5deg); }
  }

  /* === å…ˆç”Ÿã‚¬ã‚¤ãƒ‰ï¼ˆå¹ãå‡ºã—ï¼‰ === */
  .teacher-bubble {
    position: absolute;
    top: 15%;
    left: 50%;
    transform: translateX(-50%) translateY(-20px);
    background: #fff;
    padding: 10px 24px;
    border-radius: 50px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    font-size: clamp(14px, 2vw, 18px);
    color: #555;
    z-index: 5;
    white-space: nowrap;
    animation: floatBubble 4s ease-in-out infinite;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .teacher-bubble::after {
    content: ""; position: absolute;
    bottom: -10px; left: 50%; transform: translateX(-50%);
    border-width: 10px 10px 0; border-style: solid;
    border-color: #fff transparent transparent transparent;
  }
  @keyframes floatBubble {
    0%, 100% { transform: translateX(-50%) translateY(0); }
    50% { transform: translateX(-50%) translateY(-10px); }
  }


  /* === ãƒšãƒ¼ã‚¸é·ç§»æ¼”å‡º === */
  #pageFlip {
    position: fixed; inset: 0; z-index: 9999;
    pointer-events: none; display: none;
    background: #fff;
    opacity: 0;
  }
  #pageFlip.run {
    display: block;
    animation: wipeOut 0.4s cubic-bezier(0.25, 1, 0.5, 1) forwards;
  }
  @keyframes wipeOut {
    0% { opacity: 0; transform: scale(1.1); }
    100% { opacity: 1; transform: scale(1); }
  }

  /* === ãƒ©ãƒ³ãƒ‰ã‚¹ã‚±ãƒ¼ãƒ—è­¦å‘Š === */
  #landscapeLock {
    position: fixed; inset: 0;
    display: none; align-items: center; justify-content: center;
    z-index: 2147483647;
    background: #2d3436; color: #fff;
    flex-direction: column; text-align: center;
  }
  body.needLandscape #landscapeLock { display: flex; }
  .lock-icon { font-size: 60px; margin-bottom: 20px; animation: rotatePhone 2s infinite; }
  @keyframes rotatePhone { 0%,100%{transform:rotate(0deg);} 20%{transform:rotate(-90deg);} 80%{transform:rotate(-90deg);} }

  /* === ãƒ¢ãƒã‚¤ãƒ«èª¿æ•´ === */
  @media (max-width: 768px) and (orientation: landscape) {
    .game-title { font-size: 28px; margin-top: 5px; }
    .header { padding-top: 10px; }
    .mode-card { height: min(200px, 60vh); width: 40vw; }
    .card-icon { font-size: 40px; margin-bottom: 5px; }
    .mascot-container { width: 300px; bottom: -40px; }
    .teacher-bubble { top: 18%; font-size: 12px; padding: 6px 16px; }
  }
</style>
</head>

<body>

<div class="bg-particles" aria-hidden="true">
  </div>

<div class="app-container">
  
  <header class="header">
    <h1 class="game-title">
      <span>ã‚¦</span><span>ã‚¯</span><span>ãƒ¬</span><span>ãƒ¬</span><span>ã§</span><span>ã‚</span><span>ã</span><span>ã¼</span><span>ã†</span>
    </h1>
  </header>

  <div class="teacher-bubble">
    <span style="font-size:1.5em">ğŸ°</span>
    <span>ã©ã£ã¡ã§ ã‚ãã¶ï¼Ÿ</span>
  </div>

  <main class="menu-stage">
    
    <div class="mascot-container">
      <svg preserveaspectratio="xMidYMid meet" viewbox="0 0 800 600" width="100%" height="100%">
        <ellipse cx="400" cy="500" fill="rgba(0,0,0,0.1)" rx="200" ry="40"></ellipse>
        <path d="M360 480 C300 360, 340 260, 330 160 C320 80, 300 40, 280 20 L320 20 C360 60, 380 120, 390 200 C400 300, 380 380, 420 480 Z" fill="#D2691E"></path>
        <path d="M360 480 C300 360, 340 260, 330 160 C320 80, 300 40, 280 20 L320 20 C360 60, 380 120, 390 200 C400 300, 380 380, 420 480 Z" fill="url(#woodGradient)" opacity="0.8"></path>
        <path d="M310 350 Q350 340 380 330" fill="none" stroke="#F1C40F" stroke-width="8" stroke-linecap="round"></path>
        <path d="M300 300 Q340 290 370 280" fill="none" stroke="#F1C40F" stroke-width="8" stroke-linecap="round"></path>
        <path d="M295 250 Q330 240 360 230" fill="none" stroke="#F1C40F" stroke-width="8" stroke-linecap="round"></path>
        <g fill="#A2D149">
          <path d="M330 40 C180 20, 60 120, 40 200"></path>
          <path d="M330 40 C200 0, 120 40, 90 100"></path>
          <path d="M330 40 C460 20, 580 120, 620 220"></path>
          <path d="M330 40 C480 0, 620 40, 660 120"></path>
        </g>
        <g transform="translate(440 420) rotate(-15)">
          <ellipse cx="50" cy="80" fill="#8D6E63" rx="45" ry="60"></ellipse>
          <rect fill="#5D4037" height="70" width="12" x="44" y="10"></rect>
          <rect fill="#F39C12" height="20" rx="5" width="40" x="30" y="-20"></rect>
          <line stroke="#ffffff" stroke-width="2" x1="48" x2="48" y1="10" y2="150"></line>
        </g>
        <g id="ukeNotes" class="uke-notes" transform="translate(482 440)">
          <text x="0" y="0" style="font-size:60px; fill:#FF007F; animation: popNote 2s infinite;">â™ª</text>
          <text x="60" y="-40" style="font-size:50px; fill:#00E5FF; animation: popNote 2.5s infinite 0.5s;">â™«</text>
          <text x="-40" y="-60" style="font-size:55px; fill:#F4D03F; animation: popNote 2.2s infinite 1s;">â™¬</text>
        </g>
        <defs>
          <linearGradient id="woodGradient" x1="0%" y1="0%" x2="100%" y2="0%">
             <stop offset="0%" style="stop-color:#A0522D;stop-opacity:1" />
             <stop offset="100%" style="stop-color:#8B4513;stop-opacity:1" />
          </linearGradient>
        </defs>
        <style>
          @keyframes popNote {
            0% { opacity:0; transform: translate(0,0) scale(0.5); }
            50% { opacity:1; }
            100% { opacity:0; transform: translate(20px, -100px) scale(1.2) rotate(20deg); }
          }
        </style>
      </svg>
    </div>

    <div class="mode-card card-tap" onclick="goFlip('game.html?mode=TAP')" role="button" tabindex="0">
      <div class="card-icon">ğŸ‘†</div>
      <h2 class="card-title">ã‚¿ãƒƒãƒ—ã§<br>ã‚ãã¶</h2>
      <span class="card-sub">ã‚¦ã‚¯ãƒ¬ãƒ¬ãªã—ã§OKï¼</span>
    </div>

    <div class="mode-card card-uke" onclick="goFlip('ukulele.html')" role="button" tabindex="0">
      <div class="card-icon">ğŸ¸</div>
      <h2 class="card-title">ã‚¦ã‚¯ãƒ¬ãƒ¬ã§<br>ã‚ãã¶</h2>
      <span class="card-sub">æœ¬ç‰©ã®æ¥½å™¨ã‚’ã¤ã‹ã†ã‚ˆ</span>
    </div>

  </main>
</div>

<div id="landscapeLock" aria-hidden="true">
  <div class="lock-icon">ğŸ“±â†”ï¸</div>
  <div style="font-size:20px; font-weight:bold;">æ¨ªç”»é¢ã«ã—ã¦ã­ï¼</div>
</div>

<div id="pageFlip"></div>

<script>
/* === å…±é€šã‚¹ã‚¯ãƒªãƒ—ãƒˆ === */

// ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆé«˜ã•èª¿æ•´
function setVh(){
  const h = (window.visualViewport ? window.visualViewport.height : window.innerHeight);
  document.documentElement.style.setProperty('--vh', (h*0.01)+'px');
}
window.addEventListener('resize', setVh);
window.addEventListener('orientationchange', ()=>setTimeout(setVh, 250));
setVh();

// ç”»é¢é·ç§»
let __navLock = false;
function goFlip(url){
  if(__navLock) return;
  __navLock = true;
  const ov = document.getElementById('pageFlip');
  
  // ã‚¿ãƒƒãƒ—æ™‚ã®éŸ³ã‚’å…¥ã‚Œã‚‹ãªã‚‰ã“ã“ï¼ˆAudioContextç­‰ï¼‰
  
  if(!ov){ location.href = url; return; }
  ov.classList.add('run');
  setTimeout(()=>{ location.href = url; }, 350); // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ™‚é–“ã«åˆã‚ã›ã‚‹
}

window.addEventListener('pageshow', ()=>{
  __navLock = false;
  const ov = document.getElementById('pageFlip');
  if(ov){ ov.classList.remove('run'); }
});

// æ¨ªç”»é¢ãƒ­ãƒƒã‚¯
(function(){
  function apply(){
    var portrait = window.innerHeight > window.innerWidth;
    document.body.classList.toggle('needLandscape', portrait);
    var lock = document.getElementById('landscapeLock');
    if(lock) lock.setAttribute('aria-hidden', portrait ? 'false' : 'true');
  }
  window.addEventListener('resize', apply);
  window.addEventListener('orientationchange', ()=>setTimeout(apply, 60));
  try{ if(screen.orientation && screen.orientation.lock) screen.orientation.lock('landscape').catch(()=>{}); }catch(e){}
  apply();
})();
</script>

</body>
</html>